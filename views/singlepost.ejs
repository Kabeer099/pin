<% include ./partials/header.ejs %>
<div class="bg-zinc-800 text-white text-center">

<div
    class="min-h-screen flex flex-col items-center justify-center bg-zinc-800 text-white px-4">
    <div class="max-w-md w-full">
        <div class="bg-zinc-700 p-8 rounded-lg shadow-lg w-full">
            <!-- Post Image -->
            <!-- Post Image -->
            <img src="/images/uploads/<%= post.image %>"
                alt="<%= post.title %>"
                class="w-full h-[40vh] md:h-[50vh] w-[100vw] object-cover object-center rounded-lg">

            <div class="mt-4">
                <!-- Post Title -->
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-semibold mb-2"><%= post.title
                        %></h2>
                    <h2 class="text-2xl font-semibold mb-2">@<%=
                        post.user.username %></h2>
                </div>

                <!-- Post Description -->
                <p class="text-white mb-4"><%= post.description %></p>

                <!-- Download Button -->
                <a type="button"
                    class="px-3 py-2 text-black font-bold rounded-lg bg-white cursor-pointer"
                    href="/images/uploads/<%= post.image %>"
                    download="<%= post.image %>">Download</a>

                <!-- Share Section -->
                <div class="mt-6">
                    <h3 class="text-sm font-semibold mb-2">Share this post:</h3>
                    <div class="flex gap-3 flex-wrap">

                        <!-- Facebook -->
                        <a
                            href="https://www.facebook.com/sharer/sharer.php?u=<%= encodeURIComponent('https://pin.up.railway.app/show/posts/' + post._id) %>"
                            target="_blank"
                            class="px-3 py-2 bg-blue-600 rounded-lg text-white text-sm hover:bg-blue-700">
                            Facebook
                        </a>

                        <!-- Twitter / X -->
                        <a
                            href="https://twitter.com/intent/tweet?url=<%= encodeURIComponent('https://pin.up.railway.app/show/posts/' + post._id) %>&text=<%= encodeURIComponent(post.title) %>"
                            target="_blank"
                            class="px-3 py-2 bg-sky-500 rounded-lg text-white text-sm hover:bg-sky-600">
                            Twitter
                        </a>

                        <!-- WhatsApp -->
                        <a
                            href="https://wa.me/?text=<%= encodeURIComponent(post.title + ' - https://pin.up.railway.app/show/posts/' + post._id) %>"
                            target="_blank"
                            class="px-3 py-2 bg-green-500 rounded-lg text-white text-sm hover:bg-green-600">
                            WhatsApp
                        </a>

                        <!-- LinkedIn -->
                        <a
                            href="https://www.linkedin.com/sharing/share-offsite/?url=<%= encodeURIComponent('https://pin.up.railway.app/show/posts/' + post._id) %>"
                            target="_blank"
                            class="px-3 py-2 bg-blue-700 rounded-lg text-white text-sm hover:bg-blue-800">
                            LinkedIn
                        </a>

                        <!-- Copy Link -->
                        <button onclick="copyLink()"
                            class="px-3 py-2 bg-zinc-500 rounded-lg text-white text-sm hover:bg-zinc-600">
                            Copy Link
                        </button>
                    </div>
                </div>

            </div>
        </div>
        
    </div>
</div>
<!-- Random Posts Section -->
<div class="mt-12">
    <h2 class="text-2xl font-semibold mb-4">More from the feed</h2>

    <% if (typeof randomPosts !== 'undefined' && randomPosts &&
    randomPosts.length > 0) { %>
    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
        <% randomPosts.forEach(function(rPost){ %>
        <a href="/show/posts/<%= rPost._id %>"
            class="block group overflow-hidden rounded-lg relative">
            <img
                src="/images/uploads/<%= rPost.image %>"
                alt="<%= rPost.title || 'Post' %>"
                class="w-80 h-80 object-cover rounded-lg group-hover:scale-105 transition-transform duration-300">
            <p class="mt-2 text-sm text-white truncate"><%= rPost.title
                || 'Untitled' %></p>
        </a>
        <% }) %>
    </div>
    <% } else { %>
    <p class="text-gray-400">No other posts available right now.</p>
    <% } %>
</div>
</div>

<script>
  function copyLink() {
    const link = "<%= 'https://pin.up.railway.app//show/posts/' + post._id %>";
    navigator.clipboard.writeText(link).then(() => {
      alert("Link copied to clipboard!");
    });
  }
</script>

<% include ./partials/footer.ejs %>
